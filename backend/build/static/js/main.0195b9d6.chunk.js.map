{"version":3,"sources":["firebaseConfig.js","contexts/SearchResultContext.js","components/ResultDetails.js","contexts/UserContext.js","components/VoteSection.js","contexts/ToastContext.js","components/ReqButton.js","components/InfoListItem.js","components/BookInfo.js","contexts/RequestedListContext.js","components/PageNav.js","components/BookResult.js","components/SearchBar.js","components/RequestSection.js","components/Tabs.js","components/Popup.js","components/RegisterForm.js","components/SignInForm.js","components/SignOutMessage.js","components/Toast.js","components/MyRequestList.js","App.js","index.js"],"names":["firebase","require","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","module","exports","SearchResultContext","createContext","SearchResultProvider","children","useState","data","results","setResults","fetched","setFetched","isLoading","setIsLoading","Provider","value","getData","url","keywords","fetch","then","res","json","catch","err","console","log","ResultDetails","useContext","totalItems","resultStatus","resultRef","useRef","useEffect","current","focus","aria-live","ref","tabIndex","initialState","uid","email","emailVerified","role","UserContext","UserProvider","userStatus","setUserStatus","isSignedIn","setIsSignedIn","authCheckDone","setAuthCheckDone","alertMessage","setAlert","requestList","setRequestList","registerOnServer","password","sendEmailVerification","a","method","headers","body","JSON","stringify","fetching","result","status","signIn","message","auth","signInWithEmailAndPassword","error","getRequestList","firestore","collection","doc","onSnapshot","snapshot","exists","signOut","checkUserStatus","onAuthStateChanged","user","getIdTokenResult","idTokenResult","claims","admin","register","createUserWithEmailAndPassword","VoteSection","bookInfo","voteSum","setVoteSum","id","votedOn","setVotedOn","handleVote","alert","vote","action","book","includes","Fragment","className","type","onClick","toastMsg","isShown","ToastContext","ToastProvider","toast","setToast","showToast","toastShown","setTimeout","ReqButton","React","sendData","title","InfoListItem","detailedInfo","category","listItem","info","arrJoin","join","b","src","imageLinks","smallThumbnail","alt","subtitle","authors","publisher","publishedDate","categories","averageRating","handleListItem","content","description","BookDescription","showDesc","setShowDesc","href","e","preventDefault","BookInfo","undefined","items","map","key","volumeInfo","RequestedListContext","Component","RequestedListProvider","requestedList","setRequestedList","isFetched","setIsFetched","getRequestedList","orderBy","querySnapshot","allData","forEach","push","BookResult","requestedData","unrequestedData","searchResults","requestedResults","filter","item","i","arr","unrequestedResults","reverse","filterSearchResults","length","SearchBar","onChange","searchResultContext","getUrl","URL","params","q","startIndex","maxResults","search","URLSearchParams","toString","name","placeholder","onKeyUp","keyCode","bind","RequestSection","Tabs","activeTab","tabs","label","to","Popup","history","RegisterForm","emptyForm","handleSubmitOnServer","onSubmit","htmlFor","autoFocus","checked","goBack","SignInForm","SignOutMessage","window","location","reload","Toast","MyRequestList","setData","books","headingRef","getReqBookInfos","list","where","get","query","unshift","App","useReducer","state","newState","input","setInput","target","useHistory","exact","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.0195b9d6.chunk.js","sourcesContent":["const firebase = require('firebase/app');\r\n\r\n// firebase services\r\nrequire('firebase/auth');\r\nrequire('firebase/firestore');\r\n\r\n// Your web app's Firebase configuration\r\nvar firebaseConfig = {\r\n  apiKey: 'AIzaSyABr6Z9iTrM62xpqWWnno-P2fiPVMBj5eA',\r\n  authDomain: 'mitranetra-1234.firebaseapp.com',\r\n  databaseURL: 'https://mitranetra-1234.firebaseio.com',\r\n  projectId: 'mitranetra-1234',\r\n  storageBucket: 'mitranetra-1234.appspot.com',\r\n  messagingSenderId: '10603497416',\r\n  appId: '1:10603497416:web:db504911852f1f519122fd',\r\n  measurementId: 'G-KRXRPY012G',\r\n};\r\n// Initialize Firebase\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\n// export default firebase;\r\nmodule.exports = firebase;\r\n","import React, { useState, createContext, useReducer } from 'react';\r\n\r\nexport const SearchResultContext = createContext();\r\n\r\nexport const SearchResultProvider = ({ children }) => {\r\n  const [results, setResults] = useState({\r\n    data: {},\r\n  });\r\n  const [fetched, setFetched] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const getData = (url, keywords) => {\r\n    // don't run if searchbar is empty\r\n    if (keywords === '') return null;\r\n\r\n    setIsLoading(true);\r\n    fetch(url(keywords))\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        setResults({ data: json });\r\n        setFetched(true);\r\n        setIsLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n  return (\r\n    <SearchResultContext.Provider\r\n      value={{ results, fetched, isLoading, getData }}\r\n    >\r\n      {children}\r\n    </SearchResultContext.Provider>\r\n  );\r\n};\r\n","import React, { useRef, useEffect, useContext } from 'react';\r\nimport { SearchResultContext } from '../contexts/SearchResultContext';\r\n\r\nexport const ResultDetails = () => {\r\n  const { results, isLoading, fetched } = useContext(SearchResultContext);\r\n  const totalItems = results.data.totalItems;\r\n  let resultStatus = '';\r\n\r\n  if (isLoading) resultStatus = 'loading...';\r\n  else if (fetched && !isLoading)\r\n    resultStatus =\r\n      totalItems === 0\r\n        ? 'Pencarian tidak ditemukan'\r\n        : `ditemukan ${totalItems} hasil`;\r\n\r\n  // focus handling\r\n  const resultRef = useRef();\r\n  useEffect(() => resultRef.current.focus(), [resultStatus]);\r\n\r\n  return (\r\n    <span aria-live=\"polite\" ref={resultRef} tabIndex={0}>\r\n      {resultStatus}\r\n    </span>\r\n  );\r\n};\r\n","import React, { useState, createContext } from 'react';\r\nimport firebase from '../firebaseConfig';\r\n\r\nconst initialState = {\r\n  uid: '',\r\n  email: '',\r\n  emailVerified: false,\r\n  role: '',\r\n};\r\nexport const UserContext = createContext(initialState);\r\nexport const UserProvider = ({ children }) => {\r\n  const [userStatus, setUserStatus] = useState(initialState);\r\n  const [isSignedIn, setIsSignedIn] = useState(false);\r\n  const [authCheckDone, setAuthCheckDone] = useState(false);\r\n  const [alertMessage, setAlert] = useState('');\r\n  const [requestList, setRequestList] = useState([]);\r\n\r\n  // actions\r\n  // register on server side\r\n  const serverUrl =\r\n    'https://us-central1-mitranetra-1234.cloudfunctions.net/app';\r\n  const registerOnServer = async (email, password, sendEmailVerification) => {\r\n    try {\r\n      const fetching = await fetch(`${serverUrl}/api/users`, {\r\n        method: 'post',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ email, password, sendEmailVerification }),\r\n      });\r\n      const result = await fetching.json();\r\n      if (result.status === 'success') {\r\n        setAlert('success');\r\n\r\n        // auto sign in after register\r\n        signIn(email, password);\r\n      } else setAlert(result.err.message);\r\n    } catch (err) {\r\n      console.log('error while connecting to server:', err);\r\n    }\r\n  };\r\n\r\n  // register user on client side\r\n  const register = (email, password) => {\r\n    firebase\r\n      .auth()\r\n      .createUserWithEmailAndPassword(email, password)\r\n      .then(() => setAlert('success'))\r\n      /*\r\n      .then(() => {\r\n        firebase.auth().onAuthStateChanged((user) => {\r\n          user.sendEmailVerification();\r\n          console.log('email verification sent');\r\n        });\r\n      })\r\n      */\r\n      .catch((error) => {\r\n        setAlert(error.message);\r\n      });\r\n  };\r\n\r\n  // sign in user\r\n  const signIn = (email, password) => {\r\n    firebase\r\n      .auth()\r\n      .signInWithEmailAndPassword(email, password)\r\n      .then(() => {\r\n        setAlert('success');\r\n        setAuthCheckDone(true);\r\n      })\r\n      .catch((error) => setAlert(error.message));\r\n  };\r\n  // check user access\r\n  const checkUserStatus = () => {\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n      if (user) {\r\n        // user is signed in\r\n        console.log(user.uid);\r\n\r\n        // check if the user is admin\r\n        user.getIdTokenResult().then((idTokenResult) => {\r\n          if (!!idTokenResult.claims.admin) {\r\n            console.log('user is admin');\r\n            setUserStatus({\r\n              uid: user.uid,\r\n              email: user.email,\r\n              emailVerified: user.emailVerified,\r\n              role: 'admin',\r\n            });\r\n          } else {\r\n            console.log('user is a basic user');\r\n            setUserStatus({\r\n              uid: user.uid,\r\n              email: user.email,\r\n              emailVerified: user.emailVerified,\r\n              role: '',\r\n            });\r\n          }\r\n        });\r\n        getRequestList(user.uid);\r\n        setIsSignedIn(true);\r\n      } else {\r\n        // user is not signed in\r\n        setIsSignedIn(false);\r\n        setUserStatus({\r\n          uid: '',\r\n          email: '',\r\n          emailVerified: false,\r\n          role: '',\r\n        });\r\n        console.log(userStatus.uid);\r\n      }\r\n    });\r\n    setAuthCheckDone(true);\r\n  };\r\n\r\n  // sign out user\r\n  const signOut = () => {\r\n    return firebase\r\n      .auth()\r\n      .signOut()\r\n      .then(\r\n        () => console.log('sign out success'),\r\n        (err) => {\r\n          console.log(err);\r\n          return { err };\r\n        }\r\n      );\r\n  };\r\n\r\n  // query user's request list\r\n  const getRequestList = (uid) => {\r\n    try {\r\n      console.log(uid);\r\n      firebase\r\n        .firestore()\r\n        .collection('users')\r\n        .doc(uid)\r\n        .onSnapshot((snapshot) => {\r\n          if (!snapshot.exists) return console.log('request list is empty');\r\n          const { requestList } = snapshot.data();\r\n          setRequestList(requestList);\r\n        });\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  // render\r\n  return (\r\n    <UserContext.Provider\r\n      value={{\r\n        userStatus,\r\n        authCheckDone,\r\n        registerOnServer,\r\n        isSignedIn,\r\n        signIn,\r\n        signOut,\r\n        checkUserStatus,\r\n        register,\r\n        alertMessage,\r\n        getRequestList,\r\n        requestList,\r\n        setAlert,\r\n      }}\r\n    >\r\n      {children}\r\n    </UserContext.Provider>\r\n  );\r\n};\r\n","import React, { useEffect, useContext, useState } from 'react';\r\nimport firebase from '../firebaseConfig';\r\nimport { UserContext } from '../contexts/UserContext';\r\n\r\nexport const VoteSection = ({ bookInfo }) => {\r\n  //jangan lupa diganti saat deploy\r\n  const serverUrl =\r\n    'https://us-central1-mitranetra-1234.cloudfunctions.net/app';\r\n\r\n  const { userStatus, requestList, isSignedIn } = useContext(UserContext);\r\n  const [voteSum, setVoteSum] = useState(bookInfo.voteSum);\r\n  const bookRef = firebase.firestore().collection('buku').doc(bookInfo.id);\r\n  const [votedOn, setVotedOn] = useState(false);\r\n\r\n  // button function\r\n  const handleVote = async () => {\r\n    if (!isSignedIn) return alert('Anda harus  Sign In sebelum request buku!');\r\n    if (votedOn) {\r\n      // remove 1 voteSum from server side\r\n      const status = await vote('remove-vote');\r\n      // when success, update voteSum on the client-side.\r\n      if (status === 'success') setVoteSum(voteSum - 1);\r\n    } else {\r\n      const status = await vote('add-vote');\r\n      if (status === 'success') setVoteSum(voteSum + 1);\r\n    }\r\n    setVotedOn(!votedOn);\r\n  };\r\n\r\n  const vote = async (action) => {\r\n    try {\r\n      const res = await fetch(`${serverUrl}/api/${action}`, {\r\n        method: 'post',\r\n        headers: {\r\n          'content-type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ uid: userStatus.uid, book: bookInfo }),\r\n      });\r\n\r\n      return await res.json();\r\n    } catch (err) {\r\n      console.log(`${action} failed`, err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // if bookId exists in requestList, set votedOn to true and vise versa.\r\n    setVotedOn(requestList.includes(bookInfo.id));\r\n    // if signed out, return all button to initial state\r\n    if (!isSignedIn) setVotedOn(false);\r\n  }, [requestList, isSignedIn]);\r\n  return (\r\n    <React.Fragment>\r\n      <div className=\"voteSum\">\r\n        <div>Telah diminta sebanyak:</div>\r\n        {/* ini gak tau kenapa kalo di gabung jadi satu div, voteSum gak mau update */}\r\n        <div>{voteSum}</div>\r\n      </div>\r\n      <input\r\n        className=\"vote-btn\"\r\n        type=\"button\"\r\n        value={votedOn ? 'Batalkan Request' : '+ Request Buku'}\r\n        onClick={handleVote}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\n\r\nconst initialState = {\r\n  toastMsg: '',\r\n  isShown: false,\r\n};\r\nexport const ToastContext = createContext(initialState);\r\nexport const ToastProvider = ({ children }) => {\r\n  const [toast, setToast] = useState(initialState);\r\n\r\n  // show toast function\r\n  const showToast = (message, toastShown) => {\r\n    setToast({ toastMsg: message, isShown: false });\r\n    setTimeout(() => setToast({ toastMsg: '', isShown: false }), 2000);\r\n  };\r\n\r\n  // render\r\n  return (\r\n    <ToastContext.Provider value={{ toast, showToast }}>\r\n      {children}\r\n    </ToastContext.Provider>\r\n  );\r\n};\r\n","/**\r\n * props:\r\n * - book : detailed book info\r\n * - uid : user's uid\r\n */\r\n\r\nimport React, { useContext } from 'react';\r\nimport { UserContext } from '../contexts/UserContext';\r\nimport { ToastContext } from '../contexts/ToastContext';\r\n\r\nexport const ReqButton = ({ book }) => {\r\n  // get contexts and set status\r\n  const { userStatus } = useContext(UserContext);\r\n  const { uid } = userStatus;\r\n  const { showToast } = useContext(ToastContext);\r\n  const [isRequested, setIsRequested] = React.useState(false);\r\n\r\n  // functions\r\n  const sendData = async () => {\r\n    if (uid === '') return alert('Anda harus sign in sebelum request buku');\r\n\r\n    // add book request to 'buku' collection\r\n    book.voteSum = 1;\r\n    const result = await fetch(\r\n      'https://us-central1-mitranetra-1234.cloudfunctions.net/app/api/add',\r\n      {\r\n        method: 'post',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ book, uid }),\r\n      }\r\n    )\r\n      .then((res) => res.json())\r\n      .then((json) => {\r\n        console.log('adding book status:', json);\r\n        // setIsRequested(true);\r\n        showToast('Buku berhasil ditambahkan ke daftar request', false);\r\n      })\r\n      .catch((err) => console.log('error while adding book:', err));\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {/* <span aria-live=\"assertive\">\r\n        {isRequested ? 'Buku berhasil ditambahkan ke daftar request' : null}\r\n      </span> */}\r\n      <input\r\n        type=\"button\"\r\n        value=\"Request Buku\"\r\n        title=\"Request buku ini\"\r\n        onClick={sendData}\r\n      />\r\n    </React.Fragment>\r\n  );\r\n};\r\n","/**\r\n * included components: ReqButton, VoteSection\r\n * props:\r\n * - category ('ReqSection', 'bookResult')\r\n * - book: array of book's brief info\r\n * - detailedInfo: array of all detailed book's info\r\n */\r\n\r\nimport React, { Fragment, useState } from 'react';\r\nimport { VoteSection } from './VoteSection';\r\nimport { ReqButton } from './ReqButton';\r\n\r\nexport const InfoListItem = ({ book, detailedInfo, category }) => {\r\n  const handleListItem = () => {\r\n    const infos = [\r\n      'imageLinks',\r\n      'title',\r\n      'subtitle',\r\n      'authors',\r\n      'averageRating',\r\n      'publishedDate',\r\n      'publisher',\r\n      'categories',\r\n    ];\r\n\r\n    // assign to '-' if info was empty/unavailable\r\n    for (let info of infos) {\r\n      if (!book[info]) {\r\n        book[info] = '-';\r\n      }\r\n    }\r\n\r\n    const arrJoin = (info) => {\r\n      if (info === '-') return '-';\r\n      else return info.join(', ');\r\n    };\r\n\r\n    const b = book;\r\n    return (\r\n      <Fragment>\r\n        <div>\r\n          <img\r\n            src={b.imageLinks.smallThumbnail}\r\n            alt={`Gambar Cover untuk ${b.title}`}\r\n          />\r\n        </div>\r\n        <h4>{b.title}</h4>\r\n        <p>{b.subtitle === '-' ? '' : b.subtitle}</p>\r\n        <div>\r\n          Pengarang: {arrJoin(b.authors)}.\r\n          <br />\r\n          Penerbit: {b.publisher}.\r\n          <br />\r\n          Tanggal Terbit: {b.publishedDate}\r\n          <br />\r\n          Kategori: {arrJoin(b.categories)}\r\n          <br />\r\n          Rating: {b.averageRating + '/5'}\r\n        </div>\r\n      </Fragment>\r\n    );\r\n  };\r\n\r\n  // run info handler function\r\n  const listItem = handleListItem();\r\n\r\n  return (\r\n    <li>\r\n      {listItem}\r\n      <BookDescription content={book.description} />\r\n\r\n      {category === 'bookResult' ? <ReqButton book={detailedInfo} /> : null}\r\n\r\n      {category === 'reqSection' ? (\r\n        <VoteSection bookInfo={detailedInfo} />\r\n      ) : null}\r\n    </li>\r\n  );\r\n};\r\n\r\n// BookDescription component\r\nconst BookDescription = ({ content }) => {\r\n  const [showDesc, setShowDesc] = useState(false);\r\n\r\n  const toggleDesc = (e) => {\r\n    e.preventDefault();\r\n    setShowDesc(!showDesc);\r\n  };\r\n  return (\r\n    <div>\r\n      <a href=\"#\" onClick={toggleDesc}>\r\n        {showDesc ? 'Sembunyikan deskripsi' : 'Lihat deskripsi'}\r\n      </a>\r\n      {showDesc && <p>{content}</p>}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from 'react';\r\nimport { InfoListItem } from './InfoListItem';\r\n\r\nexport const BookInfo = ({ category, data }) => {\r\n  // functions\r\n  const handleBookInfo = () => {\r\n    if (data.items === undefined) return '';\r\n\r\n    const infoList = data.items.map((book) => {\r\n      return (\r\n        <InfoListItem\r\n          key={book.id}\r\n          book={book.volumeInfo}\r\n          detailedInfo={book}\r\n          category={category}\r\n        />\r\n      );\r\n    });\r\n    return infoList;\r\n  };\r\n  return (\r\n    <div>\r\n      <ul>{handleBookInfo()}</ul>\r\n    </div>\r\n  );\r\n};\r\n","import React, { createContext, useState } from 'react';\r\nimport firebase from '../firebaseConfig';\r\n\r\nexport const RequestedListContext = createContext();\r\nexport const RequestedListProvider = ({ children }) => {\r\n  const [requestedList, setRequestedList] = useState({\r\n    items: [],\r\n  });\r\n  const [isFetched, setIsFetched] = useState(false);\r\n\r\n  // functions\r\n  const getListServerSide = () => {\r\n    // gak dipake karena harus fetch berkala, jadi kurang dinamis.\r\n    // jangan lupa diganti ketika build dan deploy\r\n    const serverUrl =\r\n      'https://us-central1-mitranetra-1234.cloudfunctions.net/app';\r\n    return fetch(`${serverUrl}/api/requests`).then((res) => res.json());\r\n  };\r\n\r\n  /* run local database when on localhost for testing\r\n    if (window.location.hostname === 'localhost') {\r\n      console.log('localhost detected!');\r\n      db.settings({\r\n        host: 'localhost:8080',\r\n        ssl: false,\r\n      });\r\n    }\r\n*/\r\n  // get list on client side\r\n  const getRequestedList = () => {\r\n    const db = firebase.firestore();\r\n    db.collection('buku')\r\n      .orderBy('voteSum', 'desc')\r\n      .onSnapshot(\r\n        (querySnapshot) => {\r\n          let allData = [];\r\n          querySnapshot.forEach((doc) => {\r\n            allData.push(doc.data());\r\n          });\r\n          setRequestedList({ items: allData });\r\n          console.log(allData);\r\n          setIsFetched(true);\r\n        },\r\n        (err) => {\r\n          setIsFetched(false);\r\n          console.log('error while fetching requestid list:', err);\r\n        }\r\n      );\r\n  };\r\n\r\n  return (\r\n    <RequestedListContext.Provider\r\n      value={{ requestedList, isFetched, getRequestedList }}\r\n    >\r\n      {children}\r\n    </RequestedListContext.Provider>\r\n  );\r\n};\r\n","import React from 'react'\r\n\r\nclass PageNav extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        {/* show page navigation for result pagination */}\r\n      </div>\r\n    )\r\n  }\r\n}\r\nexport default PageNav\r\n","import React, { useContext, useState, useEffect } from 'react';\r\nimport { ResultDetails } from './ResultDetails';\r\nimport { BookInfo } from './BookInfo';\r\nimport PageNav from './PageNav';\r\nimport { RequestedListContext } from '../contexts/RequestedListContext';\r\nimport { SearchResultContext } from '../contexts/SearchResultContext';\r\n\r\nexport const BookResult = () => {\r\n  // get contexts\r\n  const { requestedList } = useContext(RequestedListContext);\r\n  const { results, isLoading, fetched } = useContext(SearchResultContext);\r\n\r\n  // arrays for containing new filtered results data\r\n  let requestedData = { items: [] };\r\n  let unrequestedData = { items: [] };\r\n\r\n  // function for separating requested and unrequested search result\r\n  const filterSearchResults = () => {\r\n    if (typeof results === 'undefined' || !results.data.items) return;\r\n    const searchResults = results.data.items;\r\n    const requestedBookList = requestedList.items;\r\n    const requestedResults = requestedBookList.filter((item, i, arr) => {\r\n      for (let result of searchResults) {\r\n        if (result.id === item.id) {\r\n          result.status = 'requested';\r\n          return result;\r\n        }\r\n      }\r\n    });\r\n\r\n    const unrequestedResults = searchResults.filter((result) => {\r\n      if (typeof result.status === 'undefined') return result;\r\n    });\r\n    requestedData.items = requestedResults.reverse();\r\n    unrequestedData.items = unrequestedResults;\r\n  };\r\n\r\n  // run search filtering\r\n  filterSearchResults();\r\n\r\n  return (\r\n    <div>\r\n      <ResultDetails />\r\n      {requestedData.items.length !== 0 ? (\r\n        <React.Fragment>\r\n          <h3>Hasil dari buku yang telah di request</h3>\r\n          <BookInfo category=\"reqSection\" data={requestedData} />\r\n        </React.Fragment>\r\n      ) : null}\r\n      {unrequestedData.items.length !== 0 ? (\r\n        <React.Fragment>\r\n          <h3>Hasil buku yang belumdi request</h3>\r\n          <BookInfo category=\"bookResult\" data={unrequestedData} />\r\n        </React.Fragment>\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useState } from 'react';\r\nimport { SearchResultContext } from '../contexts/SearchResultContext';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { LiveMessage } from 'react-aria-live';\r\n\r\nexport const SearchBar = ({ onChange, keywords }) => {\r\n  const searchResultContext = useContext(SearchResultContext);\r\n  const { results, fetched, isLoading, getData } = searchResultContext;\r\n\r\n  const getUrl = (keywords) => {\r\n    const url = new URL('https://www.googleapis.com/books/v1/volumes');\r\n    const params = {\r\n      q: keywords,\r\n      startIndex: 0,\r\n      maxResults: 15,\r\n    };\r\n    url.search = new URLSearchParams(params).toString();\r\n    return url;\r\n  };\r\n\r\n  const enterOnSearchField = (e) => {\r\n    if (e.keyCode === 13) {\r\n      getData(getUrl, keywords);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <input\r\n        type=\"text\"\r\n        name=\"keywords\"\r\n        placeholder=\"ketik judul dan pengarang untuk hasil lebih akurat\"\r\n        onChange={(e) => onChange(e)}\r\n        onKeyUp={enterOnSearchField}\r\n        value={keywords}\r\n      />\r\n      <input\r\n        type=\"button\"\r\n        value=\"Cari\"\r\n        onClick={getData.bind(this, getUrl, keywords)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\nimport { BookInfo } from './BookInfo';\r\nimport { useContext } from 'react';\r\nimport { RequestedListContext } from '../contexts/RequestedListContext';\r\n\r\nexport const RequestSection = () => {\r\n  const { requestedList } = useContext(RequestedListContext);\r\n  return (\r\n    <div>\r\n      <h2>Buku Paling Banyak Di Request</h2>\r\n      <BookInfo category=\"reqSection\" data={requestedList} />\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * tabs props will appear based on login status\r\n * handleTab(value) akan dijalankan saat tab di klik\r\n */\r\nimport React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst handleTab = (e, value) => {\r\n  e.preventDefault();\r\n  alert(value);\r\n};\r\n\r\nexport const Tabs = ({ activeTab, userStatus, isSignedIn }) => {\r\n  const showTabs = () => {\r\n    if (!isSignedIn) {\r\n      return [\r\n        { label: 'Home', value: 1, url: '/' },\r\n        { label: 'Register', value: 2, url: '/register' },\r\n        { label: 'Sign in', value: 3, url: '/sign-in' },\r\n      ];\r\n    } else {\r\n      return userStatus.role === 'admin'\r\n        ? [\r\n            { label: 'Home', value: 1, url: '/' },\r\n            { label: 'Admin Tools', value: 2, url: '/admin-tools' },\r\n            { label: 'Sign out', value: 3, url: '/sign-out' },\r\n          ]\r\n        : [\r\n            { label: 'Home', value: 1, url: '/' },\r\n            { label: 'My Request List', value: 2, url: '/user/requests' },\r\n            { label: 'Sign out', value: 3, url: '/sign-out' },\r\n          ];\r\n    }\r\n  };\r\n  const tabs = showTabs();\r\n  const welcomeMessage = () => {\r\n    if (!isSignedIn) return <span>Selamat datang. Silahkan Sign in</span>;\r\n    else\r\n      return userStatus.role === 'admin' ? (\r\n        <span>{`Anda masuk dengan akun ${userStatus.email} sebagai admin`}</span>\r\n      ) : (\r\n        <span>{`Anda masuk dengan akun ${userStatus.email}`}</span>\r\n      );\r\n  };\r\n  return (\r\n    <nav className=\"tab-manager\">\r\n      {welcomeMessage()}\r\n      <ul>\r\n        {tabs.map(({ label, value, url }) => (\r\n          <li\r\n            key={value}\r\n            className={`tab ${value === activeTab ? 'selected-tab' : ''}`}\r\n          >\r\n            <Link to={url}>{label}</Link>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { UserContext } from '../contexts/UserContext';\r\n\r\nexport const Popup = ({ history, message }) => {\r\n  // automatically redirected to home after 1.5 seconds\r\n  setTimeout(() => history.push('/'), 1500);\r\n  return (\r\n    <div className=\"popup\">\r\n      <div className=\"popup-content\">\r\n        <h3 role=\"alert\">{message}</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from 'react';\r\nimport '../App.css';\r\nimport { UserContext } from '../contexts/UserContext';\r\nimport { Popup } from './Popup';\r\n\r\nexport const RegisterForm = ({\r\n  onChange,\r\n  history,\r\n  email,\r\n  password,\r\n  sendEmailVerification,\r\n  emptyForm,\r\n}) => {\r\n  // get contexts\r\n  const { register, registerOnServer, setAlert, alertMessage } = useContext(\r\n    UserContext\r\n  );\r\n\r\n  // reset alert message and form stuff\r\n  useEffect(() => {\r\n    setAlert('');\r\n    emptyForm();\r\n  }, []);\r\n\r\n  // handle submit server side\r\n  const handleSubmitOnServer = async (e) => {\r\n    e.preventDefault();\r\n    await registerOnServer(email, password, sendEmailVerification);\r\n  };\r\n  // handle submit client side\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    register(email, password);\r\n  };\r\n\r\n  // render\r\n  return (\r\n    <div className=\"popup\">\r\n      <div className=\"popup-content\">\r\n        <h2>Register dengan Alamat Email dan Password</h2>\r\n        <form onSubmit={handleSubmitOnServer} method=\"post\">\r\n          <label htmlFor=\"email\">Email: </label>\r\n          <input\r\n            id=\"email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            autoFocus\r\n            placeholder=\"abc@example.com\"\r\n            value={email}\r\n            onChange={onChange}\r\n          />{' '}\r\n          <br />\r\n          <label htmlFor=\"password\">Password: </label>\r\n          <input\r\n            id=\"password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={onChange}\r\n          />{' '}\r\n          <br />\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"sendEV\"\r\n            name=\"sendEmailVerification\"\r\n            checked={sendEmailVerification}\r\n            onChange={onChange}\r\n          />\r\n          <label htmlFor=\"sendEV\">Kirimkan Email Verifikasi</label>\r\n          <p role=\"alert\">{alertMessage}</p>\r\n          <input type=\"submit\" value=\"Register\" />\r\n          <input type=\"button\" value=\"Close\" onClick={() => history.goBack()} />\r\n        </form>\r\n      </div>\r\n      {alertMessage === 'success' ? (\r\n        <Popup\r\n          history={history}\r\n          message=\"Registrasi sukses! Anda akan log in secara otomatis.\"\r\n        />\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext, useEffect } from 'react';\r\nimport '../App.css';\r\nimport { UserContext } from '../contexts/UserContext';\r\nimport { Popup } from './Popup';\r\n\r\nexport const SignInForm = ({\r\n  onChange,\r\n  email,\r\n  password,\r\n  emptyForm,\r\n  history,\r\n}) => {\r\n  // get contexts\r\n  const { signIn, alertMessage, setAlert } = useContext(UserContext);\r\n\r\n  // reset alert message and form stuff\r\n  useEffect(() => {\r\n    setAlert('');\r\n    emptyForm();\r\n  }, []);\r\n\r\n  // handle submit\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    signIn(email, password);\r\n  };\r\n  return (\r\n    <div className=\"popup\">\r\n      <div className=\"popup-content\">\r\n        <h2>Sign in dengan Alamat Email dan Password Anda</h2>\r\n        <form onSubmit={handleSubmit} method=\"post\">\r\n          <label htmlFor=\"email\">Email: </label>\r\n          <input\r\n            id=\"email\"\r\n            type=\"email\"\r\n            name=\"email\"\r\n            value={email}\r\n            autoFocus\r\n            placeholder=\"abc@example.com\"\r\n            onChange={(e) => onChange(e)}\r\n          />{' '}\r\n          <br />\r\n          <label htmlFor=\"password\">Password: </label>\r\n          <input\r\n            id=\"password\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            value={password}\r\n            onChange={(e) => onChange(e)}\r\n          />{' '}\r\n          <br />\r\n          <p role=\"alert\">{alertMessage}</p>\r\n          <input type=\"submit\" value=\"Sign in\" />\r\n          <input\r\n            type=\"button\"\r\n            value=\"Cancel\"\r\n            onClick={() => history.goBack()}\r\n          />\r\n        </form>\r\n      </div>\r\n      {alertMessage === 'success' ? (\r\n        <Popup history={history} message=\"Sign in sukses!\" />\r\n      ) : null}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from 'react';\r\n\r\nexport const SignOutMessage = ({ history, signOut, isSignedIn }) => {\r\n  signOut();\r\n  // go back to home page and auto reload when finished signing out\r\n  useEffect(async () => {\r\n    await history.push('/');\r\n    window.location.reload(false);\r\n  }, [isSignedIn]);\r\n  return (\r\n    <div className=\"popup\">\r\n      <div className=\"popup-content\">\r\n        <h3 role=\"alert\">Signing out...</h3>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useContext } from 'react';\r\nimport { ToastContext } from '../contexts/ToastContext';\r\nimport { LiveMessage } from 'react-aria-live';\r\n\r\nexport const Toast = () => {\r\n  const { toast } = useContext(ToastContext);\r\n  const { toastMsg, isShown } = toast;\r\n  return (\r\n    <div>\r\n      <LiveMessage message={toastMsg} aria-live=\"assertive\" />\r\n      {isShown ? <span aria-live=\"assertive\">{toastMsg}</span> : null}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useContext, useState } from 'react';\r\nimport firebase from '../firebaseConfig';\r\nimport { BookInfo } from './BookInfo';\r\n\r\nexport const MyRequestList = ({ requestList }) => {\r\n  const [data, setData] = useState({ items: [] });\r\n  const books = [];\r\n\r\n  // focus handler\r\n  const headingRef = useRef();\r\n\r\n  // show book info\r\n  const getReqBookInfos = async (list) => {\r\n    if (list.length === 0) return;\r\n    await firebase\r\n      .firestore()\r\n      .collection('buku')\r\n      .where('id', 'in', list)\r\n      .get()\r\n      .then((query) => {\r\n        query.forEach((doc) => {\r\n          books.unshift(doc.data());\r\n        });\r\n      });\r\n    setData({ items: books });\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    headingRef.current.focus();\r\n    getReqBookInfos(requestList);\r\n  }, [requestList]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <h2 tabIndex={0} ref={headingRef}>\r\n        Daftar Buku yang Anda Request\r\n      </h2>\r\n      <BookInfo category=\"reqSection\" data={data} />\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React, { useReducer, useContext, useEffect } from 'react';\nimport { BookResult } from './components/BookResult';\nimport { SearchBar } from './components/SearchBar';\nimport { RequestSection } from './components/RequestSection';\nimport { RequestedListContext } from './contexts/RequestedListContext';\nimport { Tabs } from './components/Tabs';\nimport { Route, useHistory, Switch } from 'react-router-dom';\nimport { RegisterForm } from './components/RegisterForm';\nimport { UserContext } from './contexts/UserContext';\nimport { SignInForm } from './components/SignInForm';\nimport { SignOutMessage } from './components/SignOutMessage';\nimport { Toast } from './components/Toast';\nimport { MyRequestList } from './components/MyRequestList';\nimport { Test } from './components/Test';\nimport { SearchResultContext } from './contexts/SearchResultContext';\n\nexport const App = () => {\n  /**\n   * start input stuff\n   */\n\n  const [input, setInput] = useReducer(\n    (state, newState) => ({ ...state, ...newState }),\n    // initial form state\n    { keywords: '', email: '', password: '', sendEmailVerification: true }\n  );\n  const onChange = (e) => {\n    const value =\n      e.target.name === 'sendEmailVerification'\n        ? e.target.checked\n        : e.target.value;\n    const name = e.target.name;\n    setInput({ [name]: value });\n  };\n\n  // reset form field to empty\n  const emptyForm = () => {\n    setInput({ keywords: '', email: '', password: '' });\n  };\n\n  /**\n   * end input stuff\n   */\n\n  /**\n   * start fetch data\n   */\n  // get required contexts\n  const { getRequestedList } = useContext(RequestedListContext);\n  const { fetched } = useContext(SearchResultContext);\n\n  // useHistory() for page history navigation\n  const history = useHistory();\n\n  // get current user account status\n  const {\n    userStatus,\n    isSignedIn,\n    signOut,\n    checkUserStatus,\n    requestList,\n    authCheckDone,\n  } = useContext(UserContext);\n\n  // get user status and fetch global requested list\n  useEffect(() => {\n    checkUserStatus();\n    getRequestedList();\n  }, [isSignedIn]);\n\n  /**\n   * end fetch data\n   */\n  /**\n   * start render components\n   */\n  return (\n    <div className=\"App\">\n      <h1>Request Buku Format EPUB dan Braille</h1>\n\n      <React.Fragment>\n        {authCheckDone ? (\n          <Tabs userStatus={userStatus} isSignedIn={isSignedIn} />\n        ) : null}\n        <main>\n          <Switch>\n            {/* // home page */}\n            <Route exact path=\"/\">\n              <SearchBar onChange={onChange} keywords={input.keywords} />\n              {fetched ? <BookResult /> : null}\n              <RequestSection />\n            </Route>\n\n            <Route path=\"/register\">\n              <RegisterForm\n                onChange={onChange}\n                emptyForm={emptyForm}\n                email={input.email}\n                password={input.password}\n                sendEmailVerification={input.sendEmailVerification}\n                history={history}\n              />\n            </Route>\n\n            {/* // sign in page */}\n            <Route path=\"/sign-in\">\n              <SignInForm\n                onChange={onChange}\n                email={input.email}\n                password={input.password}\n                history={history}\n                emptyForm={emptyForm}\n              />\n            </Route>\n\n            {/* // sign out page */}\n            <Route path=\"/sign-out\">\n              <SignOutMessage\n                history={history}\n                isSignedIn={isSignedIn}\n                signOut={signOut}\n              />\n            </Route>\n\n            {/* // admin tools page */}\n            <Route path=\"/admin-tools\"></Route>\n\n            {/* // my request list page */}\n            <Route path=\"/user/requests\">\n              <MyRequestList requestList={requestList} />\n            </Route>\n\n            {/* // error page */}\n            <Route>\n              <h2>Halaman tidak ditemukan.</h2>\n            </Route>\n          </Switch>\n        </main>\n      </React.Fragment>\n\n      <Toast />\n    </div>\n  );\n\n  /**\n   * end render components\n   */\n};\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { App } from './App';\nimport { RequestedListProvider } from './contexts/RequestedListContext';\nimport { SearchResultProvider } from './contexts/SearchResultContext';\nimport { withRouter, BrowserRouter } from 'react-router-dom';\nimport { UserProvider } from './contexts/UserContext';\nimport { LiveAnnouncer } from 'react-aria-live';\nimport { ToastProvider } from './contexts/ToastContext';\n\nReactDOM.render(\n  <BrowserRouter>\n    <SearchResultProvider>\n      <RequestedListProvider>\n        <UserProvider>\n          <ToastProvider>\n            <App />\n          </ToastProvider>\n        </UserProvider>\n      </RequestedListProvider>\n    </SearchResultProvider>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}